<!--
    Modified from https://illuminate.dotasphere.com/
    I don't claim to be a good web developer but this was mainly done as
    a test to see how you can host on Github a link to your own domain.
    This code started as a copy of Bongikairu's so many thanks to him ;D
-->
<!doctype html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120833732-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-127734786-4');
    </script>
    
    <!--Site icon-->
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.png" />

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Artifact Game History | JoshLmao</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script defer src="https://pro.fontawesome.com/releases/v5.6.1/js/all.js" integrity="sha384-ncMWtRMSOo+cLmfdaa6vmMGzBJKysBDF9tq5YK1MAnAjcyipdW2vgTS1jOntY4fs" crossorigin="anonymous"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.2.1/darkly/bootstrap.min.css" rel="stylesheet" integrity="sha384-F7cPHYSdE3FzBKvdxDKyFow9Y28Yq7KGHQOKpOI+rwc8s6jJnp///mpEJAib2EM6" crossorigin="anonymous">
    <!--Styling-->
    <link rel="stylesheet" type="text/css" href="css/style.css"></link>
    <!--Github Buttons-->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!--Twitter-->
    <script>window.twttr = (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0],
              t = window.twttr || {};
            if (d.getElementById(id)) return t;
            js = d.createElement(s);
            js.id = id;
            js.src = "https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);
          
            t._e = [];
            t.ready = function(f) {
              t._e.push(f);
            };
          
            return t;
          }(document, "script", "twitter-wjs"));</script>
    <style id="filter_style">

    </style>
</head>
<body>

<div class="container">
    <div class="page-header">
        <h1>Artifact Game History </h1>
        <h3>Your current Artifact game history</h3>
        <!--Header buttons-->
        <!--Github Buttons, View, Star & Follow-->
        <a class="github-button" href="https://github.com/JoshLmao/ArtifactAPI.MatchHistory" data-size="large" aria-label="View JoshLmao/ArtifactAPI.MatchHistory on GitHub">View on Github</a>
        <a class="github-button" href="https://github.com/JoshLmao/ArtifactAPI.MatchHistory" data-icon="octicon-star" data-size="large" aria-label="Star JoshLmao/ArtifactAPI.MatchHistory on GitHub">Star</a>
        <a class="github-button" href="https://github.com/JoshLmao" data-size="large" aria-label="Follow @JoshLmao on GitHub">Follow</a>
        <!--Twitter follow button-->
        <a class="twitter-follow-button" href="https://twitter.com/JoshLmao" data-size="large" data-show-count="false" data-show-screen-name="false">Follow</a>
    </div>
    <hr/>

    <div id="output" style="display: none" class="mt-3">
        <div class="card">
            <div class="card-body">
                <div class="container-fluid">
                    <!--Title row-->
                    <div class="row">
                        <div class="card-title float-left" id="output_title"></div>
                    </div>
                    <!--Stats row-->
                    <div class="row">
                        <h4>Lifetime Stats</h4>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th data-field="overview">Overview</th>
                                    <th data-field="matches">Matches</th>
                                    <th data-field="win_rate">Win Rate</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Total Games</td>
                                    <td id="life_totalGames">22</td>
                                    <td id="life_totalGamesWR">0%</td>
                                </tr>
                                <tr>
                                    <td>Matchmaking</td>
                                    <td id="life_totalMM">12</td>
                                    <td id="life_totalMMWR">0%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!--Casual & Expert stats-->
                    <div class="row">
                        <div class="col-sm">
                            <h4>Casual Stats</h4>
                            <table class="table">
                                <thead>
                                    <th data-field="overview">Overview</th>
                                    <th data-field="matches">Matches</th>
                                    <th data-field="win_rate">Win Rate</th> 
                                </thead>
                                <tbody>
                                    <td>Total Games</td>
                                    <td id="cas_totalGames">22</td>
                                    <td id="cas_totalWR">0%</td>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-sm">
                            <h4>Expert Stats</h4>
                            <table class="table">
                                <thead>
                                    <th data-field="overview">Overview</th>
                                    <th data-field="matches">Matches</th>
                                    <th data-field="win_rate">Win Rate</th> 
                                </thead>
                                <tbody>
                                    <td>Total Games</td>
                                    <td id="exp_totalGames">22</td>
                                    <td id="exp_totalWR">0%</td>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <hr />
                    <!--Match Mode filter row-->
                    <div class="row">
                        <h5 id="filter_title" class="card-title float-right mr-3">Modes:</h5>
                        <div class="float-left">
                            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                <!--All matches-->
                                <label class="btn btn-secondary active">
                                    <input type="radio" name="filter_matchType" autocomplete="off" id="filter_all" value="all" checked>
                                            All
                                </label>
                                <!--Normal Matchmaking-->
                                <label class="btn btn-secondary">
                                    <input type="radio" name="filter_matchType" autocomplete="off" id="filter_match_matchmaking" value="matchmaking"> 
                                            Matchmaking
                                </label>
                                <!--Bot Matches-->
                                <label class="btn btn-secondary">
                                    <input type="radio" name="filter_matchType" autocomplete="off" id="filter_match_botMatch" value="botMatch"> 
                                            BotMatch
                                </label>
                                <!--Gauntlets-->
                                <!--Call to Arms-->
                                <label class="btn btn-secondary">
                                    <input type="radio" name="filter_matchType" autocomplete="off" id="filter_match_c2a" value="callToArms"> 
                                            Call to Arms
                                </label>
                                <!--Expert Constructed-->
                                <label class="btn btn-secondary">
                                    <input type="radio" name="filter_matchType" autocomplete="off" id="filter_match_expConst" value="expConstructed"> 
                                            Expert Constructed
                                </label>
                                <!--Expert Phantom's Draft-->
                                <label class="btn btn-secondary">
                                    <input type="radio" name="filter_matchType" autocomplete="off" id="filter_match_exppd" value="exppd"> 
                                            Expert Phantom's Draft
                                </label>
                                <!--Expert Keeper's Draft-->
                                <label class="btn btn-secondary">
                                    <input type="radio" name="filter_matchType" autocomplete="off" id="filter_match_expkd" value="expkd"> 
                                            Expert Keeper's Draft
                                </label>
                                <!--Constructed-->
                                <label class="btn btn-secondary">
                                    <input type="radio" name="filter_matchType" autocomplete="off" id="filter_match_const" value="constructed"> 
                                                Constructed
                                </label>
                                <!--Casual Phantoms Draft-->
                                <label class="btn btn-secondary">
                                    <input type="radio" name="filter_matchType" autocomplete="off" id="filter_match_pd" value="pd"> 
                                            Phantom's Draft
                                </label>
                            </div>
                        </div>
                    </div>
                    <!--Match outcome filter row-->
                    <div class="row">
                        <h5 id="filter_title" class="card-title mr-3">Outcome: </h5>
                        <div class="mr-3">
                            <!--Matches Result filter buttons-->
                            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                <label class="btn btn-secondary active">
                                    <input type="radio" name="filter_outcome" autocomplete="off" checked
                                            id="filter_outcome_all" value="all"> 
                                            All
                                </label>
                                <label class="btn btn-secondary">
                                    <input type="radio" name="filter_outcome" autocomplete="off" id="filter_outcome_win"
                                            value="win"> 
                                            Win
                                </label>
                                <label class="btn btn-secondary">
                                    <input type="radio" name="filter_outcome" autocomplete="off" id="filter_outcome_lose"
                                            value="lose"> 
                                            Lose
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="card-text" id="output_data">

                </p>
            </div>
            <div id="loading" class="card-footer">
                <i class="far fa-spinner fa-spin"></i> Loading ...
            </div>
        </div>
    </div>

    <div id="whatis" class="hideondata">
        <h3>What is this?</h3>
        This site will display all your current Artifact game history and statistics from the data you insert.
        I previously developed this as a <a href="https://github.com/JoshLmao/ArtifactAPI.MatchHistory">WPF application</a> and now
        have an online version! 
        <br/>
        <br/>
        If you'd like to see the full source code, it's available online on my Github (or click <a href="https://github.com/JoshLmao/ArtifactAPI.MatchHistory.Website">here</a>)
    </div>

    <div id="instruction" class="mt-3 hideondata">
        <h3>Instructions</h3>
        <ol>
            <li>
                Open <a href="https://steamcommunity.com/my/gcpd/583950/?category=Games&tab=MatchPlayers" target="_blank">this link</a> to view your current Artifact game history
            </li>
            <li>
                <div>Type <b>javascript:</b> into your url and paste the following code after it
                </div>
                <textarea id="script_box" class="form-control textAreaStyle" readonly>(()=>{let matchIds=[];const read_data=()=>{const player_name=document.getElementsByClassName("profile_small_header_name")[0].children[0].textContent;const row_list=document.getElementById("personaldata_elements_container").querySelectorAll("tr");let all_output="";for(let i=1;i<row_list.length;i++){const col_list=row_list[i].querySelectorAll("td");let output="";for(let j=0;j<col_list.length;j++){if(j==0){if(!matchIds.includes(col_list[j].textContent)){matchIds.push(col_list[j].textContent)}else{break}}
                    output+=col_list[j].textContent+(j==col_list.length-1?"":"|")}
                    if(output!="")
                    all_output+=output+(i==row_list.length-1?"":",")}
                    window.location="https://artifacthistory.joshlmao.com/#"+all_output};const b1=document.getElementById("load_more_button");const b2=document.getElementById("inventory_history_loading");const has_more=()=>{return(b1&&b1.style.display!=="none")||(b2&&b2.style.display!=="none")};const has_load_more=()=>b1&&b1.style.display!=="none";const load_more=()=>b1.click();const watch_load_more=()=>{const interval=setInterval(()=>{if(has_load_more()){load_more()}else{if(!has_more()){clearInterval(interval);console.log(`done`);read_data()}}},100)};const b3=document.getElementById("personaldata_elements_container");const h1=document.createElement("h1");const h1text=document.createTextNode("Loading more data ");const h1spinner=document.createElement("img");h1spinner.src="https://steamcommunity-a.akamaihd.net/public/images/login/throbber.gif";h1.appendChild(h1text);h1.appendChild(h1spinner);b3.insertBefore(h1,b3.childNodes[0]);watch_load_more()})()
                </textarea>
            </li>
            <li>
                Wait until you're redirected to another page <b>(should be "artifacthistory.joshlmao.com/#...")</b> which will display all your game history and statistics!
            </li>
        </ol>
    </div>

    <div class="mt-3 hideondata">
        <h3>Github Repository</h3>
        <span>
            If you're interested in how this works, want to download the source code or help fix issues, check out the repo!
            <br/>
            WPF App: <a href="https://github.com/JoshLmao/ArtifactAPI.MatchHistory">https://github.com/JoshLmao/ArtifactAPI.MatchHistory</a>
            <br/>
            Website: <a href="https://github.com/JoshLmao/ArtifactAPI.MatchHistory.Website">https://github.com/JoshLmao/ArtifactAPI.MatchHistory.Website</a>
        </span>
    </div>

    <hr/>

    <div class="mt-3 text-center text-muted">
        <div>by <a href="https://github.com/joshlmao">@joshlmao</a></div>
        <div>Code derived from <a href="https://github.com/bongikairu">@bongikairu</a></div>
    </div>

</div>

</body>

<script src="js/stats.js"></script>
<script src="js/analyzeData.js"></script>
</html>
